stages:
  - develop
  - integrate
  - validate
  - branch
  - release

variables:
  SKIP_IT_TESTS: 'false'
  ELASTICSEARCH_HOST: 'elasticsearch'

.build:
  before_script:
    - echo ES returns status code $(curl -s -o /dev/null -w "%{http_code}" "http://elasticsearch:9200/_cat/health")
  services:
    - name: docker.vpro.nl/vpro-elasticsearch:1.0
      alias: elasticsearch
      command: [ "bin/elasticsearch", "-Ediscovery.type=single-node" ]

include:
  - project: 'shared/gitlab/gitlab-templates'
    ref: 'feature/SYS-955-extra-ES-container-in-builds'
    file: 'java_maven.yml'
  - project: 'shared/gitlab/gitlab-templates'
    ref: 'tags/1.0'
    file: 'maven_release.yml'
